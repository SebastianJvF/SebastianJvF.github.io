<!doctype html>
<html>
<head>

	<title>Web app for rapid prototyping of interactive smartphone cases</title>
	
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/layout.css"  media="all">
	
	<script src="js/fabric/fabric.js" type="text/javascript"></script>
	<script src="js/jquery/jquery-1.11.3.js" type="text/javascript"></script>
	
	<script src="js/app/menu-toggles.js" type="text/javascript"></script>
	<script src="js/app/information-messages.js" type="text/javascript"></script>
	<script src="js/app/draggable-objects.js" type="text/javascript"></script>
	
	<script type="text/javascript">	
	/** APPLICATION **/
	/* Variables */
	var phoneModel = '';
	var addedObjects;
	
	/* Phone model */
	/* Make the user choose a phone model (disabled), show message */
	/* TO ADD NEW OBJECTS: add to the list under "Phone model"! */
	$(document).ready(function() {
		// $('#canvas').hide();
		$('#phone-model').change(function () {
		    if($(this).val() != '') {
		    	phoneModel = $(this).val();
		    	showMessage('Phone model chosen:<br>' +  $("#phone-model option:selected").text(), showMessageBlue);
		    	// $('#canvas').show();
		    } else {
		    	// $('#canvas').hide();
				phoneModel = '';
				showMessage('Please choose a phone model!', showMessageRed);
		    }
		})
	});
	
	/* $( ".inner" ).append( "<p>Test</p>" ); add all menu elements with jquery in an array of all objects*/
	
	/** ADD DRAG AND DROP OPTIONS **/
	
	$(document).ready(function() {
	                  
	    var text = new fabric.Text('Hello world!', { 
	    		left: 0,
	            top : 0,
	            fontSize: 30,
	            fontFamily: 'Arial',
	            fill: 'black',
	            textAlign: 'left',
	            hasControls: true,
	            lockUniScaling: true,
	            borderColor: controlColor,
	            cornerColor: controlColor
	    });
	    
	    createDraggableObject(text, 'testbutton');
	    
//	    var group = [];
//	    
//	            fabric.loadSVGFromURL(
//	            	
//	            	'img/buttons/small-push-button.svg', 
//	            	
//	            	function(objects, options) {
//	                	var loadedObjects = new fabric.Group(group);	    
//	                	createDraggableObject(loadedObjects, 'svgtest');
//	                }, 
//	                
//	                function(item, object) {
//	                    object.set('id', item.getAttribute('id'));
//	                    group.push(object);
//	                }
//	            );
//        var group = [];
//
//        fabric.loadSVGFromURL("http://fabricjs.com/assets/1.svg",function(objects,options) {
//
//            var loadedObjects = new fabric.Group(group);
//
//            loadedObjects.set({
//                    left: 100,
//                    top: 100,
//                    width:175,
//                    height:175
//            });
//
//            canvas.add(loadedObjects);
//            canvas.renderAll();
//
//        },function(item, object) {
//                object.set('id',item.getAttribute('id'));
//                group.push(object);
//        });
	            
	            fabric.loadSVGFromURL('img/buttons/small-push-button.svg', function(objects, options) {
	            	var obj = fabric.util.groupSVGElements(objects, options);
	            	canvas.add(obj);
	            	canvas.calcOffset();
	            	canvas.renderAll();
	            }
	    		    
	});
	</script>

</head>
<body>
	<div id="info-message">
	Please activate Javascript to use this application.
	</div>

	<div id="wrap">
		<nav>
			<div class="information">
			Please click on the menu headers below
			to view available configuration options.
			</div>
			
			<h1>Phone model</h1>
			<div class="description">Choose one of the available phone models below</div>
			<div class="options">
				<form id="application">
				<select id="phone-model">
				<option value="">Please choose...</option>
				<option value="iphone-5">iPhone 5</option>
				</select>
				</form>
			</div>	
			
			<h1>Push buttons</h1>
			<div class="description">Rockers and buttons that spring back to their usual, unpushed state</div>
			<div class="options">
				<ul>
				<li><a href="#" id="testbutton"><span></span>Hello World</a></li>
				<li><a href="#" id="svgtest"><span></span>Hallo</a></li>
				</ul>
				<span class="clear"></span>
			</div>
			
			<!-- Not implemented as of today
			<h1>Knobs</h1>
			<div class="description">Rotary controls that can be turned to indicate one of the available state positions</div>
			<div class="options">Options panel</div>
			-->
			
			<h1>Sliders</h1>
			<div class="description">Control element to set a value by moving an indicator</div>
			<div class="options">Options panel</div>
		</nav>
		
		<div id="two-d-preview">
			<div class="information">
			This is a <span class="bold">2D representation</span> of the phone case.<br>
			Please drag controls from the menu onto the panel.
			</div>
	    	<div id="fire-dragend">
	    	<canvas id="two-d-panel" width="570" height="500"></canvas>
	    	</div>
	    </div> 
	    <script src="js/app/create-canvas.js" type="text/javascript"></script>
		
		<div id="three-d-preview">
			<div class="information">This is a <span class="bold">3D preview</span> of the case.<br> Turn it by dragging around.</div>
			<div id="three-d-panel"></div>
			<a href="#" title="Download 3D model(s)">Download 3D model(s)</a>
		</div>
		
		<span class="clear"></span>
	</div>

</body>
</html>